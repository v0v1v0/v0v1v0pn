<div class="container">

<table style="width: 100%;"><tr>
<td>NUsetup</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Specify KEY parameters used in NU.Learning to "design" analyses of Observational Data.
</h2>

<h3>Description</h3>

<p>Invoke NUsetup() to specify the name of the Hierarchical Clustering object
output by NUcluster() and the name of the data.frame containing all desired X-covariates, the
Treatment/Exposure variable and the Y-Outcome variable. It is ESSENTIAL to save the Environment
output by NUsetup() as a named object within the user's .GlobalEnv space.
</p>


<h3>Usage</h3>

<pre><code class="language-R">NUsetup(hclobj, dframe, trex, yvar)</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>hclobj</code></td>
<td>
<p>Name of a NUcluster() output object created using a cluster::diana or
stats::hclust method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dframe</code></td>
<td>
<p>Name of the data.frame containing all X-covariates, the Treatment/Exposure
variable and the Y-Outcome variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trex</code></td>
<td>
<p>Name of the numerical Treatment/Exposure variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yvar</code></td>
<td>
<p>Name of the numerical Y-Outcome variable.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The environment output by NUsetup() must be saved to the user's .GlobalEnv space. It's
contents will be automatically updated by calls to other NU.Learning functions:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>aggdf</code></td>
<td>
<p>data.frame with 4 columns and 1 row for each call to ltdagg() or lrcagg().</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggdf$Label</code></td>
<td>
<p>Factor value of "LTD" or "LRC".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggdf$Blocks</code></td>
<td>
<p>K = integer Number of Clusters requested.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggdf$LTDmean or aggdf$LRCmean</code></td>
<td>
<p>numerical value of cluster mean of LTD or LRC estimates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggdf$LTDstde or aggdf$LRCstde</code></td>
<td>
<p>numerical value of the within-cluster standard deviation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boxdf</code></td>
<td>
<p>data.frame of 2 variables ...for input to boxplot() by NUcompare().</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boxdf$NUstat</code></td>
<td>
<p>LTD or LRC estimate for a single experimental unit from ltdagg() or lrcagg().</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boxdf$K</code></td>
<td>
<p>Number of Cluters used in forming the LTD or LRC estimate for each Experimental Unit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Kmax</code></td>
<td>
<p>Maximum Number of Clusters so that Average Size will be &gt;= 12 experimental units.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LTDmax or LRCmax</code></td>
<td>
<p>Maximum Treatment Effect-Size estimate across Clusters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LTDmin or LRCmin</code></td>
<td>
<p>Minimum Treatment Effect-Size estimate across Clusters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NumLevels</code></td>
<td>
<p>Integer number of distinct Levels of the Treatment/Exposure variable: trex.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pars</code></td>
<td>
<p>Character data.frame with 4 columns and 1 row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pars[1,1]</code></td>
<td>
<p>Name of the diana or hclust object created by NUcluster().</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pars[1,2]</code></td>
<td>
<p>Name of data.frame containing the X, Treatment/Exposure and Y variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pars[1,3]</code></td>
<td>
<p>Name of Treatment/Exposure variable within data.frame pars[1,2].</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pars[1,4]</code></td>
<td>
<p>Name of Y-outcome variable within data.frame pars[1,2].</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Bob Obenchain &lt;wizbob@att.net&gt;</p>


<h3>References</h3>

<p>Obenchain RL. (2010) Local Control Approach using JMP. Chapter 7 of
<b>Analysis of Observational Health Care Data using SAS</b>, <em>Cary, NC:SAS Press</em>,
pages 151-192. 
</p>
<p>Obenchain RL. (2023) <b>NU.Learning_in_R.pdf</b> http://localcontrolstatistics.org 
</p>


<h3>See Also</h3>

<p><code>ltdagg</code>, <code>ivadj</code> and <code>lrcagg</code>.</p>


<h3>Examples</h3>

<pre><code class="language-R">  
  # Running takes about 7 seconds...
  data(pci15k)
  xvars  = c("stent", "height", "female", "diabetic", "acutemi", "ejfract", "ves1proc")
  hclobj = NUcluster(pci15k, xvars)
  NUe    = NUsetup(hclobj, pci15k, thin, surv6mo)
  ls.str(NUe)
  
</code></pre>


</div>