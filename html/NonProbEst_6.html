<div class="container">

<table style="width: 100%;"><tr>
<td>lee_weights</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculates Lee weights</h2>

<h3>Description</h3>

<p>Computes weights from propensity estimates using the propensity stratification design weights averaging formula introduced in Lee (2006) and Lee and Valliant (2009).
</p>


<h3>Usage</h3>

<pre><code class="language-R">lee_weights(convenience_propensities, reference_propensities, g = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>convenience_propensities</code></td>
<td>
<p>A vector with the propensities associated with the convenience sample.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference_propensities</code></td>
<td>
<p>A vector with the propensities associated with the reference sample.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g</code></td>
<td>
<p>The number of strata to use; by default, its value is 5.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function takes the vector of propensities <code class="reqn">\pi(x)</code> and calculates the weights to be applied in the Horvitz-Thompson estimator using the formula that can be found in Lee (2006) and Lee and Valliant (2009). The vector of propensities is divided in <em>g</em> strata (ideally five according to Cochran, 1968) aiming to have individuals with similar propensities in each strata. After the stratification, weight is calculated as follows for an individual <em>i</em>:
</p>
<p style="text-align: center;"><code class="reqn">w_i = \frac{n_r(g_i) / n_r}{n_v(g_i) / n_v}</code>
</p>

<p>where <code class="reqn">g_i</code> represents the strata to which <em>i</em> belongs, <code class="reqn">n_r (g_i)</code> and <code class="reqn">n_v (g_i)</code> are the number of individuals in the <code class="reqn">g_i</code> strata from the reference and the convenience sample respectively, and <code class="reqn">n_r</code> and <code class="reqn">n_v</code> are the sample sizes for the reference and the convenience sample respectively.
</p>


<h3>Value</h3>

<p>A vector with the corresponding weights.
</p>


<h3>References</h3>

<p>Lee, S. (2006). <em>Propensity score adjustment as a weighting scheme for volunteer panel web surveys.</em> Journal of official statistics, 22(2), 329.
</p>
<p>Lee, S., &amp; Valliant, R. (2009). <em>Estimation for volunteer panel web surveys using propensity score adjustment and calibration adjustment.</em> Sociological Methods &amp; Research, 37(3), 319-343.
</p>
<p>Cochran, W. G. (1968). <em>The Effectiveness of Adjustment by Subclassification in Removing Bias in Observational Studies.</em> Biometrics, 24(2), 295-313
</p>


<h3>Examples</h3>

<pre><code class="language-R">covariates = c("education_primaria", "education_secundaria")
data_propensities = propensities(sampleNP, sampleP, covariates)
lee_weights(data_propensities$convenience, data_propensities$reference)
</code></pre>


</div>