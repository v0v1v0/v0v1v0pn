<div class="container">

<table style="width: 100%;"><tr>
<td>nanotime-class</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Nanosecond resolution datetime functionality</h2>

<h3>Description</h3>

<p>Functions to operate on nanosecond time resolution using integer64
bit representation. Conversion functions for several standard R
types are provided, and more will be added as needed.
</p>


<h3>Usage</h3>

<pre><code class="language-R">nanotime(from, ...)

as.nanotime(from, ...)

## S4 method for signature 'character'
nanotime(from, format = "", tz = "")

## S4 method for signature 'character'
as.nanotime(from, format = "", tz = "")

nanotime.matrix(x)

## S4 method for signature 'POSIXct'
nanotime(from, accurate = TRUE)

## S4 method for signature 'POSIXct'
as.nanotime(from, accurate = TRUE)

## S4 method for signature 'POSIXlt'
nanotime(from)

## S4 method for signature 'POSIXlt'
as.nanotime(from)

## S4 method for signature 'Date'
nanotime(from)

## S4 method for signature 'Date'
as.nanotime(from)

## S4 method for signature 'nanotime'
print(x, format = "", tz = "", quote = FALSE, ...)

## S4 method for signature 'nanotime'
show(object)

## S3 method for class 'nanotime'
format(x, format = "", tz = "", ...)

## S3 method for class 'nanotime'
index2char(x, ...)

## S3 method for class 'nanotime'
as.POSIXct(x, tz = "", ...)

## S3 method for class 'nanotime'
as.POSIXlt(x, tz = "", ...)

## S3 method for class 'nanotime'
as.Date(x, ...)

## S3 method for class 'nanotime'
as.data.frame(x, ...)

## S3 method for class 'nanotime'
as.integer64(x, ...)

## S4 method for signature 'nanotime,character'
e1 - e2

## S4 method for signature 'nanotime,nanotime'
e1 - e2

## S4 method for signature 'nanotime,integer64'
e1 - e2

## S4 method for signature 'nanotime,numeric'
e1 - e2

## S4 method for signature 'ANY,nanotime'
e1 - e2

## S4 method for signature 'nanotime,ANY'
e1 - e2

## S4 method for signature 'nanotime,ANY'
e1 + e2

## S4 method for signature 'nanotime,integer64'
e1 + e2

## S4 method for signature 'nanotime,numeric'
e1 + e2

## S4 method for signature 'ANY,nanotime'
e1 + e2

## S4 method for signature 'integer64,nanotime'
e1 + e2

## S4 method for signature 'numeric,nanotime'
e1 + e2

## S4 method for signature 'nanotime,nanotime'
e1 + e2

## S4 method for signature 'nanotime,nanotime'
Arith(e1, e2)

## S4 method for signature 'nanotime,ANY'
Arith(e1, e2)

## S4 method for signature 'ANY,nanotime'
Arith(e1, e2)

## S4 method for signature 'nanotime,character'
Compare(e1, e2)

## S4 method for signature 'character,nanotime'
Compare(e1, e2)

## S4 method for signature 'nanotime,POSIXt'
Compare(e1, e2)

## S4 method for signature 'POSIXt,nanotime'
Compare(e1, e2)

## S4 method for signature 'nanotime,ANY'
Compare(e1, e2)

## S4 method for signature 'nanotime,ANY'
Logic(e1, e2)

## S4 method for signature 'ANY,nanotime'
Logic(e1, e2)

## S4 method for signature 'nanotime'
Math(x)

## S4 method for signature 'nanotime'
Math2(x, digits)

## S4 method for signature 'nanotime'
Summary(x, ..., na.rm = FALSE)

## S4 method for signature 'nanotime'
min(x, ..., na.rm = FALSE)

## S4 method for signature 'nanotime'
max(x, ..., na.rm = FALSE)

## S4 method for signature 'nanotime'
range(x, ..., na.rm = FALSE)

## S4 method for signature 'nanotime'
Complex(z)

## S4 method for signature 'nanotime'
x[[i, j, ..., drop = FALSE]]

## S4 method for signature 'nanotime,numeric'
x[i, j, ..., drop = FALSE]

## S4 method for signature 'nanotime,logical'
x[i, j, ..., drop = FALSE]

## S4 method for signature 'nanotime,character'
x[i, j, ..., drop = FALSE]

## S4 method for signature 'nanotime,ANY'
x[i, j, ..., drop = FALSE]

## S4 replacement method for signature 'nanotime,ANY,ANY,ANY'
x[i, j, ...] &lt;- value

## S3 method for class 'nanotime'
c(...)

## S4 replacement method for signature 'nanotime'
names(x) &lt;- value

## S4 method for signature 'nanotime'
is.na(x)

NA_nanotime_

## S3 method for class 'nanotime'
as.character(x, ...)

## S3 method for class 'nanoduration'
as.data.frame(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments passed to or from methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>A character string. Can also be set via
<code>options("nanotimeFormat")</code> and uses
‘%Y-%m-%dT%H:%M:%E9S%Ez’ as a default and
fallback</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tz</code></td>
<td>
<p>character specifying a timezone which is required for
<code>as.POSIXct</code>, <code>as.POSIXlt</code> and can be specified for
<code>as.nanotime</code>, <code>format</code> and <code>print</code>; it can
also be set via <code>options("nanotimeTz")</code> and uses
‘UTC’ as a default and fallback</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x, from</code></td>
<td>
<p><code>nanotime</code> objects</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>accurate</code></td>
<td>
<p>in the conversion from <code>POSIXct</code> to
<code>nanotime</code>, indicates if one wants to preserve the
maximum precision possible; the default is <code>TRUE</code>, but in
most situations the loss of precision is negligible, and
setting this parameter to <code>TRUE</code> will make the conversion
nearly an order of magnitude faster</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quote</code></td>
<td>
<p>indicates if the output of <code>print</code> should be
quoted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>argument for method <code>show</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>e1</code></td>
<td>
<p>Operand of class <code>nanotime</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>e2</code></td>
<td>
<p>Operand of class <code>nanotime</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>Required for <code>Math2</code> signature but ignored here</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>a logical indicating whether missing values should be
removed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>Required for <code>Complex</code> signature but ignored here</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i</code></td>
<td>
<p>index specifying elements to extract or replace.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>j</code></td>
<td>
<p>Required for <code>[</code> signature but ignored here</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop</code></td>
<td>
<p>Required for <code>[</code> signature but ignored here</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>argument for <code>nanotime-class</code></p>
</td>
</tr>
</table>
<h3>Format</h3>

<p>An object of class <code>nanotime</code> of length 1.
</p>


<h3>Details</h3>

<p>Notice that the conversion from POSIXct explicitly sets the last
three digits to zero. Nanosecond time stored in a 64-bit integer
has nineteen digits precision where doubles (which are used
internally for POSIXct as well) only have sixteen digits.  So
rather than showing three more (essentially <em>random</em>) digits
it is constructed such that these three additional digits are
zeros.
</p>


<h3>Value</h3>

<p>A nanotime object
</p>


<h3>Caveats</h3>

<p>Working with dates and times is <em>difficult</em>. One needs a
representation of both <em>time points</em> and <em>time
duration</em>. In R, think of <code>Date</code> or <code>POSIXct</code> objects
for the former, and <code>difftime</code> for the later. Here we have
time points <code>nanotime</code>, an interval type <code>nanoival</code> and
two flavors of duration which are a simple count of nanoseconds
<code>nanoduration</code> and a calendar duration that is able to track
concepts such as months and days <code>nanoperiod</code>. Point in time
and intervals are all based on durations relative to the epoch of
January 1, 1970.
</p>


<h3>Input and Output Format</h3>

<p>Formatting and character conversion for <code>nanotime</code> objects is
done by functions from the <span class="pkg">RcppCCTZ</span> package relying
on code from its embedded <code>CCTZ</code> library. The default format
is ISO3339 compliant: <code>%Y-%m-%dT%H:%M:%E9S%Ez</code>. It
specifies a standard ISO 8601 part for date and time — as well
as nine digits of precision for fractional seconds (down to
nanoseconds) and on offset (typically zero as we default to UTC).
It can be overriden by using <code>options()</code> with the key of
<code>nanotimeFormat</code> and a suitable value. Similarly,
<code>nanotimeTz</code> can be used to select a different timezone.
</p>
<p>For input, some slack it cut, and various shortened formats are
accepted by default such as <code>2020-03-10</code> or <code>2020-03-10
18:16:00</code>, or <code>2020-03-10 18:16:00.001</code> (and the ‘T’
separator is optional.
</p>


<h3>
<code>tz</code> parameter usage in constructors</h3>

<p>The <code>tz</code> parameter is allowed only when constructing a
<code>nanotime</code> from a <code>character</code>. This is because any
<code>numeric</code>, <code>Date</code> and <code>POSIXct</code> is de facto
considered an offset since the epoch. On the contrary, a
<code>character</code> is considered interpretable and hence if it does
not contain a timezone in its representation, it is possible to
specify the <code>tz</code> argument to specify in which timezone it
should be interpreted. This is useful in particular if one wants
to convert a <code>Date</code> to be aligned to the beginning of the day
in a specific timezone; in this case one should convert the
<code>Date</code> to a <code>character</code> before calling the
<code>nanotime</code> constructor with the desired timezone.
</p>


<h3>Author(s)</h3>

<p>Dirk Eddelbuettel
</p>
<p>Leonardo Silvestri
</p>


<h3>See Also</h3>

<p><code>nanoival</code>, <code>nanoduration</code>,
<code>nanoperiod</code>, <code>seq.nanotime</code> as well as
the documentation in package <span class="pkg">RcppCCTZ</span>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
x &lt;- nanotime(1)
print(x)
as.nanotime("1970-01-01T00:00:00.000000001+00:00")
as.nanotime("2020-03-10 Europe/Berlin")
as.nanotime("2020-03-10 18:31:23.001", tz="America/New_York")
as.nanotime("2020-03-10T040947190301440", format="%Y-%m-%dT%H%M%S%E*f")
x &lt;- x + 1
print(x)
format(x)
x &lt;- x + 10
print(x)
format(x)
nanotime(Sys.time()) + 1:3  # three elements each 1 ns apart
seq(x, by=as.nanoperiod("1d"), length.out=5, tz="Asia/Tokyo")

## End(Not run)
</code></pre>


</div>