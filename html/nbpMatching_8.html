<div class="container">

<table style="width: 100%;"><tr>
<td>distancematrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Distance matrix</h2>

<h3>Description</h3>

<p>The distancematrix function is used to reformat the input distance matrix
into the format required by the nonbipartite matching Fortran code. The
original matrix should have dimensions <code class="reqn">NxN</code>, where <code class="reqn">N</code> is the total
number of elements to be matched.  The matrix may be created in R and input
into the distancematrix function.  Alternately, the matrix may be read in
from a CSV file, i.e. a text file where distances in a given row are
delimited by commas.  If a list element is given, it should have a data.frame
element named "dist", preferably generated by the gendistance function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">distancematrix(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A matrix, data.frame, list or filename.  This should be an
<code class="reqn">N</code>x<code class="reqn">N</code> distance matrix for the <code class="reqn">N</code> elements to be matched.  The
values in the diagonal are ignored because an element cannot be matched to
itself.  Using zeros in the diagonal is preferable, although other values are
acceptable provided they are not so large that they distort the scaling of
the other values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments, potentially used when reading in a
filename and passed into read.csv.</p>
</td>
</tr>
</table>
<h3>Details</h3>

 <ul>
<li>
<p> The distancematrix function is used to reformat the input
distance matrix into the format required by the nonbipartite matching Fortran
code.
</p>
</li>
<li>
<p> If an extra column or row is present, it will be converted into row
names.  In other words, if the matrix has dimensions <code class="reqn">(N+1)</code>x<code class="reqn">N</code>, or
<code class="reqn">N</code>x<code class="reqn">(N+1)</code>, then the function will take the first row, or column, as
an ID column.  If both row and column names are present, i.e. a
<code class="reqn">(N+1)</code>x<code class="reqn">(N+1)</code> matrix, the function cannot identify the names.
</p>
</li>
<li>
<p> If an odd number of elements exist, a ghost element, or sink, will be
created whose distance is zero to all of the other elements.  For example,
when matching 17 elements, the function will create an 18th element that
matches every element perfectly.  This sink may or not be appropriate for
your application.  Naturally, you may create sinks as needed in the distance
matrix you input to the distancematrix function.
</p>
</li>
<li>
<p> The elements of distancematrix may not be re-assigned once created.  In
other words, you cannot edit the formatted distance matrix.  You need to edit
the matrix being input into the distancematrix function.  </p>
</li>
</ul>
<h3>Value</h3>

<p>distancematrix S4 object
</p>


<h3>Author(s)</h3>

<p>Cole Beck
</p>


<h3>See Also</h3>

<p><code>nonbimatch gendistance</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
plainmatrix&lt;-as.matrix(dist(sample(1:25, 8, replace=TRUE)))
diag(plainmatrix) &lt;- 99999  # setting diagonal to an infinite distance for
                           # pedagogical reasons (the diagonal may be left
                           # as zero)
mdm&lt;-distancematrix(plainmatrix)
df &lt;- data.frame(id=LETTERS[1:25], val1=rnorm(25), val2=rnorm(25))
df[sample(seq_len(nrow(df)), ceiling(nrow(df)*0.1)), 2] &lt;- NA
df.dist &lt;- gendistance(df, idcol=1, ndiscard=2)
mdm2 &lt;- distancematrix(df.dist)

</code></pre>


</div>