<div class="container">

<table style="width: 100%;"><tr>
<td>matches</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Function to find pair matches using a distance matrix.  Called by
<code>opt_nearfar</code> to discover optimal near-far matches.
</h2>

<h3>Description</h3>

<p>Given values of percent sinks and cutpoint, this function will find the
corresponding near-far match
</p>


<h3>Usage</h3>

<pre><code class="language-R">matches(dta, covs, iv = NA, imp.var = NA, tol.var = NA, sinks = 0,
    cutpoint = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dta</code></td>
<td>
<p>The name of the data frame on which to do the matching</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covs</code></td>
<td>
<p>A vector of the names of the covariates to make “near”,
e.g., covs=c("age", "sex", "race")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iv</code></td>
<td>
<p>The name of the instrumental variable, e.g., iv="QOB"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>imp.var</code></td>
<td>
<p>A list of (up to 5) named variables to prioritize in
the “near” matching</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol.var</code></td>
<td>
<p>A list of (up to 5) tolerances attached to the
prioritized variables where 0 is highest penalty for mismatch</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sinks</code></td>
<td>
<p>Percentage of the data to match to sinks (and thus
remove) if desired; default is 0</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cutpoint</code></td>
<td>
<p>Value below which individuals are too similar on iv;
increase to make individuals more “far” in match</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Default settings yield a "near" match on only observed confounders in X;
add IV, sinks, and cutpoint to get near-far match.
</p>


<h3>Value</h3>

<p>A two-column matrix of row indices of paired matches
</p>


<h3>Author(s)</h3>

<p>Joseph Rigdon <a href="mailto:jrigdon@wakehealth.edu">jrigdon@wakehealth.edu</a></p>


<h3>References</h3>

<p>Lu B, Greevy R, Xu X, Beck C (2011). Optimal nonbipartite matching and
its statistical applications. The American Statistician, 65(1), 21-30.
</p>


<h3>See Also</h3>

<p><code>opt_nearfar</code></p>


<h3>Examples</h3>

<pre><code class="language-R">k2 = matches(dta=mtcars, covs=c("cyl", "disp"), sinks=0.2, iv="carb",
    cutpoint=2, imp.var=c("cyl"), tol.var=0.03)
k2[1:5, ]
</code></pre>


</div>