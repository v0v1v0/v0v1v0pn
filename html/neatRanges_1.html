<div class="container">

<table style="width: 100%;"><tr>
<td>collapse_ranges</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Collapses the consecutive date or timestamp ranges into one record.</h2>

<h3>Description</h3>

<p>The date/time ranges where the gap between two records is equal to or less than max_gap parameter are collapsed into one record.
</p>


<h3>Usage</h3>

<pre><code class="language-R">collapse_ranges(
  df,
  groups = NULL,
  start_var = NULL,
  end_var = NULL,
  startAttr = NULL,
  endAttr = NULL,
  dimension = c("date", "timestamp"),
  max_gap = 0L,
  fmt = "%Y-%m-%d",
  tz = "UTC",
  origin = "1970-01-01"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>Your data frame (object of class 'data.frame' or 'data.table')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groups</code></td>
<td>
<p>Grouping variables, character strings</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_var</code></td>
<td>
<p>Start of the range, character of length 1L</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_var</code></td>
<td>
<p>End of the range,  character of length 1L</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>startAttr</code></td>
<td>
<p>Attributes linked to start of the range which should be kept (converted to character type by default)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>endAttr</code></td>
<td>
<p>Attributes linked to end of the range which should be kept (converted to character type by default)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dimension</code></td>
<td>
<p>Indicate whether your range includes only dates ('date') or also timestamp ('timestamp'). Defaults to 'date'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_gap</code></td>
<td>
<p>Gap between date or timestamp ranges, e.g. for 0, default, it will put together all records where there is no gap in-between</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fmt</code></td>
<td>
<p>The format of your date or timestamp field, defaults to YMD</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tz</code></td>
<td>
<p>Time zone, defaults to UTC</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>origin</code></td>
<td>
<p>Origin for timestamp conversion, defaults to '1970-01-01'</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>'data.frame' if initial input is a 'data.frame', 'data.table' if original object is a 'data.table' with collapsed records.
</p>


<h3>Examples</h3>

<pre><code class="language-R">df_collapse &lt;- data.frame(
  id = c(rep("1111", 3), rep("2222", 3)),
  rating = c("A+", "AA", "AA", rep("B-", 3)),
  start_date = c(
    "2014-01-01", "2015-01-01", "2016-01-01",
    "2017-01-01", "2018-01-01", "2019-01-01"
  ),
  end_date = c(
    "2014-12-31", "2015-12-31", "2016-03-01",
    "2017-01-31", "2018-12-31", "2020-02-01"
  )
)

collapse_ranges(df_collapse, c("id", "rating"), "start_date", "end_date")
</code></pre>


</div>