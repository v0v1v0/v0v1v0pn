<div class="container">

<table style="width: 100%;"><tr>
<td>clean_pbp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Clean Play by Play Data</h2>

<h3>Description</h3>

<p>Clean Play by Play Data
</p>


<h3>Usage</h3>

<pre><code class="language-R">clean_pbp(pbp, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pbp</code></td>
<td>
<p>is a Data frame of play-by-play data scraped using <code>fast_scraper()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to a message function (for internal use).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Build columns that capture what happens on all plays, including
penalties, using string extraction from play description.
Loosely based on Ben's nflfastR guide (<a href="https://www.nflfastr.com/articles/beginners_guide.html">https://www.nflfastr.com/articles/beginners_guide.html</a>)
but updated to work with the RS data, which has a different player format in
the play description; e.g. 24-M.Lynch instead of M.Lynch.
The function also standardizes team abbreviations so that, for example,
the Chargers are always represented by 'LAC' regardless of which year it was.
Starting in 2022, play-by-play data was missing gsis player IDs of rookies.
This functions tries to fix as many as possible.
</p>


<h3>Value</h3>

<p>The input Data Frame of the parameter 'pbp' with the following columns
added:
</p>

<dl>
<dt>success</dt>
<dd>
<p>Binary indicator wheter epa &gt; 0 in the given play. </p>
</dd>
<dt>passer</dt>
<dd>
<p>Name of the dropback player (scrambles included) including plays with penalties.</p>
</dd>
<dt>passer_jersey_number</dt>
<dd>
<p>Jersey number of the passer.</p>
</dd>
<dt>rusher</dt>
<dd>
<p>Name of the rusher (no scrambles) including plays with penalties.</p>
</dd>
<dt>rusher_jersey_number</dt>
<dd>
<p>Jersey number of the rusher.</p>
</dd>
<dt>receiver</dt>
<dd>
<p>Name of the receiver including plays with penalties.</p>
</dd>
<dt>receiver_jersey_number</dt>
<dd>
<p>Jersey number of the receiver.</p>
</dd>
<dt>pass</dt>
<dd>
<p>Binary indicator if the play was a pass play (sacks and scrambles included).</p>
</dd>
<dt>rush</dt>
<dd>
<p>Binary indicator if the play was a rushing play.</p>
</dd>
<dt>special</dt>
<dd>
<p>Binary indicator if the play was a special teams play.</p>
</dd>
<dt>first_down</dt>
<dd>
<p>Binary indicator if the play ended in a first down.</p>
</dd>
<dt>aborted_play</dt>
<dd>
<p>Binary indicator if the play description indicates "Aborted".</p>
</dd>
<dt>play</dt>
<dd>
<p>Binary indicator: 1 if the play was a 'normal' play (including penalties), 0 otherwise.</p>
</dd>
<dt>passer_id</dt>
<dd>
<p>ID of the player in the 'passer' column.</p>
</dd>
<dt>rusher_id</dt>
<dd>
<p>ID of the player in the 'rusher' column.</p>
</dd>
<dt>receiver_id</dt>
<dd>
<p>ID of the player in the 'receiver' column.</p>
</dd>
<dt>name</dt>
<dd>
<p>Name of the 'passer' if it is not 'NA', or name of the 'rusher' otherwise.</p>
</dd>
<dt>fantasy</dt>
<dd>
<p>Name of the rusher on rush plays or receiver on pass plays.</p>
</dd>
<dt>fantasy_id</dt>
<dd>
<p>ID of the rusher on rush plays or receiver on pass plays.</p>
</dd>
<dt>fantasy_player_name</dt>
<dd>
<p>Name of the rusher on rush plays or receiver on pass plays (from official stats).</p>
</dd>
<dt>fantasy_player_id</dt>
<dd>
<p>ID of the rusher on rush plays or receiver on pass plays (from official stats).</p>
</dd>
<dt>jersey_number</dt>
<dd>
<p>Jersey number of the player listed in the 'name' column.</p>
</dd>
<dt>id</dt>
<dd>
<p>ID of the player in the 'name' column.</p>
</dd>
<dt>out_of_bounds</dt>
<dd>
<p>= 1 if play description contains "ran ob", "pushed ob", or "sacked ob"; = 0 otherwise.</p>
</dd>
<dt>home_opening_kickoff</dt>
<dd>
<p>= 1 if the home team received the opening kickoff, 0 otherwise.</p>
</dd>
</dl>
<h3>See Also</h3>

<p>For information on parallel processing and progress updates please
see nflfastR.
</p>


</div>