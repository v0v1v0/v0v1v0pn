<div class="container">

<table style="width: 100%;"><tr>
<td>truncreg</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Parametric truncated regression for cross-sectional data
</h2>

<h3>Description</h3>

<p><code>truncreg</code> performs maximum likelihood estimation of the parameters in cross-sectional truncated regression. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">truncreg(formula, data, subset, 
 ll = -Inf, ul = Inf, 
 lmtol = .Machine$double.eps, maxiter = 150, 
 marg.eff = FALSE, 
 print.level = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>

<p>an object of class “formula” (or one that can be coerced to that class): a symbolic description of the model. The details of model specification are given under ‘Details’.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>an optional data frame containing variables in the model. If not found in data, the variables are taken from environment (<code>formula</code>), typically the environment from which <code>sf</code> is called.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>

<p>an optional vector specifying a subset of observations for which technical or cost efficiencies are to be computed.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ll</code></td>
<td>

<p>scalar or one-sided formula for lower limit for left-truncation; e.g. <code>ll = ~ 1</code> or <code>ll = ~ z1</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ul</code></td>
<td>

<p>scalar or one-sided formula for upper limit for right-truncation; e.g. <code>ul = ~ 800</code> or <code>ul = ~ z1</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lmtol</code></td>
<td>

<p>numeric. Tolerance for the scaled gradient in ML optimization. Default is .Machine$double.eps.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxiter</code></td>
<td>

<p>numeric. maximum number of iteration for maximization of the log likelihood function.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marg.eff</code></td>
<td>

<p>logical. If <code>TRUE</code>, unit-specific marginal effects of exogenous variables on the mean of distribution of inefficiency term are returned.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print.level</code></td>
<td>

<p>numeric. 0 - nothing is printed. 1 - optimization steps and print estimation results. 2 - detailed optimization steps and print estimation results. Default is 1.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>truncreg</code> performs a regression from a sample drawn from a restricted part of the population.  Under the assumption that the error term of the whole population is normal, the error terms in the truncated regression model have a truncated normal distribution.
</p>
<p>Both lower limit for left-truncation and upper limit for right-truncation can be specified simultaneously.
</p>
<p>Models for <code>truncreg</code> are specified symbolically. A typical model has the form <code>y ~ x1 + ...</code>, where <code>y</code> represents the left hand side variable and <code>{x1,...}</code> right hand side variables.  
</p>
<p>If <code>marg.eff = TRUE</code>, the marginal effects are computed.
</p>


<h3>Value</h3>

<p><code>truncreg</code> returns a list of class <code>npsf</code> containing the following elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>call</code></td>
<td>

<p>call. 'truncreg.cs'.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>

<p>character. Unevaluated call to function <code>truncreg</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coef</code></td>
<td>

<p>numeric. Named vector of ML parameter estimates.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table</code></td>
<td>

<p>matrix. Table with results.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vcov</code></td>
<td>

<p>matrix. Estimated covariance matrix of ML estimator. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ll</code></td>
<td>

<p>numeric. Value of log-likelihood at ML estimates.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lmtol</code></td>
<td>

<p>numeric. Convergence criterion: tolerance for the scaled gradient.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LM</code></td>
<td>

<p>numeric. Value of the scaled gradient.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>esttime</code></td>
<td>

<p>numeric. Estimation time.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marg.effects</code></td>
<td>

<p>data frame. Contains unit-specific marginal effects of exogenous variables. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma</code></td>
<td>

<p>numeric. estimate of sigma.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LL</code></td>
<td>

<p>numeric. The lower limit for left-truncation
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>UL</code></td>
<td>

<p>numeric. The upper limit for left-truncation
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>

<p>numeric. Number of observations (used in regression).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.full</code></td>
<td>

<p>numeric. Number of observations (used and not used in regression).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nontruncsample</code></td>
<td>

<p>logical. Returns TRUE if the observation in user supplied data is in the estimation subsample and in non-truncated part of the sample, and FALSE otherwise.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>esample</code></td>
<td>

<p>logical. Returns TRUE if the observation in user supplied data is in the estimation subsample and FALSE otherwise.
</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Oleg Badunenko &lt;oleg.badunenko@brunel.ac.uk&gt;
</p>


<h3>See Also</h3>

<p><code>teradial</code>, <code>tenonradial</code>, <code>teradialbc</code>, <code>tenonradialbc</code>, <code>nptestrts</code>, <code>nptestind</code>, <code>sf</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"> 
require( npsf )
 
# Female labor force participation dataset
 
data(mroz)
head(mroz)

t1 &lt;- npsf::truncreg(hours ~ kidslt6 + kidsge6 + age*educ, 
 data = mroz, ll = 0, lmtol = 1e-16, print.level = 2)
 
# matrices also can be used
myY &lt;- mroz$hours
myX &lt;- cbind(mroz$kidslt6, mroz$kidsge6, mroz$age, mroz$educ, mroz$age*mroz$educ)

t1.m &lt;- truncreg(myY ~ myX, ll = 0)

# gives identical result to `t1':
# compare summary(t1) and summary(t1.m)

# using variable for limits is admissible
# we obtain the same result as before

mroz$myll &lt;- 0
t11 &lt;- npsf::truncreg(hours ~ kidslt6 + kidsge6 + age*educ, 
 data = mroz, ll = ~ myll, lmtol = 1e-16, print.level = 0)
summary(t11)

# if you believe that the sample is additionally truncted from above at say 3500

t12 &lt;- update(t1, ul = 3500, print.level = 1)

# for obtaining marginal effects

t13 &lt;- update(t12, marg.eff = TRUE)

summary(t13$marg.effects)

</code></pre>


</div>